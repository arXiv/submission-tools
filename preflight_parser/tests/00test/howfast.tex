%
% howfast.tex
%


\section{How fast are Sketches as Proofs}
\label{sec:orevkov}

In this section the undecidability of projective geometry, together
with an analysis of Herbrand disjunctions will lead us to new results
on  non-elementary speedups, based on \cite{Statman79PAMS} and 
\cite{Orevkov79}, from sketches to proofs.

To achieve this we will transform Orevkovs formula into the language
of projective geometry. Some very old results on the undecidability in
the arithmetic of integers and rationals and in the theory of fields
by Julia Robinson \citep{Robinson49JSL} together with the concept of
representability from Gödels historic work let us define
a formula representing the predicate~$P$ from Orevkovs paper, where
$P(a,b,c)$ holds iff~$a+2^b=c$. Finally we will present a detailed
analysis of the Herbrand disjunction and obtain a lower bound for the
cut-free proof of the modified Orevkov formula. Together with the
short proof from Orevkovs paper we obtain the mentioned result. 
We take Orevkovs series of formulas because it uses no additional function 
symbols. We will represent recursive functions as presented in
\cite{shoenfield}.

%
% Orvekov
%
\subsection{Orevkovs speedup formulas}
\label{sec:orevkov:formula}
In \cite{Orevkov79} a series of formulas of first order
predicate logic is given
for which there is an non-elementary speedup in prooflength between a cut-free
and a proof with cut. He formalizes the function $f(x)=2^x$ into a
predicate~$P$ and iterates this function to get the
horrible~$2_i:=2^{(2_{i-1})}$ for~$i>0$ 
and $2_0:=0$.

\vskip2pt
Orevkov denotes by $C_k^*$ the formulas
\begin{multline*}
  \qa{b_0}((\qa{w_0}\qe{v_0}P(w_0,b_0,v_0)\land\\
  \land \qa{uvw}(\qe y(P(y,b_0,u)\land
  \qe z(P(v,y,z)\land P(z,y,w)))\limp \\
  P(v,u,w))) \limp\qe{v_k}(P(b_0,b_0,v_k)\land\\
  \land\qe{v_{k+1}}(P(b_0,v_k,v_{k-1})\land\ldots\land\qe{v_0}P(b_0,v_1,v_0))))
\end{multline*}%
%{\scriptsize\begin{multline*}
%  \qa{b_0}((\qa{w_0}\qe{v_0}P(w_0,b_0,v_0)\land\qa{uvw}(\qe y(P(y,b_0,u)\land
%  \qe z(P(v,y,z)\land P(z,y,w)))\limp P(v,u,w))) \limp\\
%  \limp\qe{v_k}(P(b_0,b_0,v_k)\land\qe{v_{k+1}}(P(b_0,v_k,v_{k-1})\land\ldots
%  \land\qe{v_0}P(b_0,v_1,v_0))))
%\end{multline*}}%
and gives for all~$k$ a derivation of~$C_k^*$ with cut, where the number of
sequents depends linearly on~$k$, while on the other hand he proves that in
any derivation which is cut-free the number of sequents is non-elementary
in~$k$. 

Since we don't have any free predicate symbols\footnote{We are working in a
theory!}, it is necessary to formulate the same predicate in projective
geometry.

The formula we want to construct should have the following properties: There
is a short proof in some reasonable calculus, and the
Herbrand-disjunction of this formula is long.

Let us start wit a short reminder on projective geometry:
In the times when projective geometry was used only for projective
closed Euclidean planes over real numbers, i.e.\ in our usual geometry,
the theorem of Desargues was really a \emph{theorem}, but with the
foundation of projective geometry with axioms it turned out that this
theorem is independent of the axioms and therefore projective planes
where the theorem is not valid are possible. So today we speak of the
Axiom of Desargues. 


\begin{definition} Two triangles are said to be \emph{perspective from
a point $O$} if there is a one-to-one correspondence between the
vertices so that lines joining corresponding vertices all go through
$O$. Dually, two triangles are said to be \emph{perspective from a
line} $o$ if there is a one-to-one correspondence between the sides of
the triangles such that the points of intersection of corresponding
sides all lie on $o$.
\end{definition}

\begin{theorem}[Desargues' Theorem] If two triangles are perspective
from a point, then they are perspective from a line.
\end{theorem}

Compare fig.~\ref{skizze:desargues} on
page~\pageref{skizze:desargues}.

%\begin{figure}[ht]
%  \[\epsfbox{diagonal.9}\]
%  \caption{Desargues' Theorem}
%  \label{skizze:desargues}
%\end{figure}

The interesting fact with this axiom is that
by adding the axiom of Desargues we get as models all the projective planes
which can be algebraized, i.e. where there is a field such that the projective
plane can be considered as the projective plane over the 3~dimensional
vectorspace over this field. In these planes the field can be defined as one
line of the plane and the arithmetic operations of the field can be defined as
terms. 

This construction is as follows: Take a line~$g$ and a distinct
line~$h$, two points~$0$ and~$1$ on the line~$h$ but not on the
line~$g$, a point~$R$ on~$g$ but not on~$h$ and a line~$l$ not equal
to~$g$, $h$ and which passes through~$(gh)$ (This is indeed
possible!). Then the operations~$+$ and~$-$ can be expressed in terms
of joining and meeting as follows:
        $$X+Y := (h[([([0R]l)X]g)([RY]l)])$$
and
        $$X\cdot Y := (h[([([1R]l)X]g)([RY]l)])$$

It is easy to prove that with this construction the points on the
line~$h$ except the point~$(gh)$ (which is $\infty$) form a
field. Furthermore it is possible to constuct an isomorphic projective
plane from the 3-dimensional vectorspace of this field. We therefore
obtain 

\begin{theorem}
Any Desarguean projective plane can be algebraized.
\end{theorem}

Consider the second requirement from above: Since the Herbrand-disjunction is
long if the Herbrand-disjunction in a certain model is long, it is enough to
work in one model. We choose the model of the projective plane over the
3~dimensional vectorspace over the field $\Q$ and denote it with $\PGQ$. This
model is a Desarguian plane (see~\cite{Prei96MT}) and therefor the
operations `$+$', `$-$', `$\cdot$' and `$/$' 
can be defined as terms as shown above.

Now we have to define natural numbers in this model. This is possible
with the following definitions:

Let $R(x)$ state that~$x$ is rational, in our case this is that $x$
lies on a special line. Then we can define the notion of integer as
follows:
\begin{multline*}
        I(z) \leftrightarrow R(z) \land \qa x\qa y\{R(x)\land R(y)
                \land \Phi(x,y,0)\land \\ \qa u[R(u) \land \Phi(x,y,u)
                \limp \Phi(x,y,u+1)] \limp \Phi(x,y,z)\}
\end{multline*}
where
        $$\Phi(x,y,z) \sim \qa {r,s,t}[R(r)\land R(s)\land R(t)\limp
                2+xyz^2+yr^3 \not= s^2+xt^2]$$
which are due to \cite{Robinson49JSL}, who showed that in the 
arithmetic of rationals the notion of an integer is definable in terms of
addition and multiplication. This proof is based upon results of Hasse
concerning quadratic forms \citep{Hasse23JRAM}.

After having defined the integers we can define positive with the identity of
Lagrange, every integer greater than zero is the sum of four
squares. Combining the arithmetic operations and the less-relation we can
define all the recursive functions (cf.~\cite{shoenfield}).

Now lets start with Orevkovs formula and translate it into a form applicable
in projective geometry. We think of the predicate letter~$P$ no longer as a
free predicate, but a formula describing the equality~$a+2^b=c$
for~$P(a,b,c)$. Furthermore we have to put the axioms in front of the formula,
i.e. $\Ax\limp B$ if~$B$ is Orevkovs formula. And in the formula itself it is
necessary to prefix any variable with something like $\nat(v)\limp\cdots$
because we want to play only on the natural numbers. The formula~$\nat(v)$
stands for the formula we get from Robinson and the translation into
projective geometry with the definitions of the arithmetic operations.



\subsection{Orevkovs proof of non-elementary speedup and its
translation}
\label{sec:orevkov:proof}

In this section we will prove the following 
\begin{theorem}
  There is a series of formulas which can be proved in linear time
  using cuts, but only in non-elementary time using sketches.
\end{theorem}

\subsubsection{The long proof}
\label{sec:orevkov:formula:long}

We will use the following notation: If there is an at most exponential
function~$f$ such that $x<f(y)$ we will write this as $x<_fy$. Similar
we introduce~$x>_fy$ for $f(x)>y$.

So let us start with the analogon to Orevkovs formula in projective
geometry: 
\begin{equation}
\label{eq:orevkov}
        \Ax\limp(A_0\land C\limp B_k(0)) 
\end{equation}
We want to estimate the length of the Herbrand-disjunction of this formula
from below. And if we find a non-elementary lower bound of the length
of the \hd we would have proved the one part. We will use the lemmas
from above a lot of times to reduce the above formula to the ``real''
core where a long computation has to be carried out.

Before we can proceed to estimate the length of this formula, we have
to give another lemma, where the length of a disjunction is estimated
by the length of one component. But since implications can hide cuts
this would spoil the valid estimation and the speedup by Orevkov, we
have to make sure that the formula cut away is of bounded complexity,
i.e. it is not growing with the growing of Orevkovs formula.

\begin{lemma}\label{lemma:hd-a-or-b}
If $B$ is not valid in $\cM$ and is of bounded complexity, then there is
an at most exponential function~$f$ such that
        $$|\HD_\cM(A)|\le f(|\HD_\cM(A\lor B)|).$$
\end{lemma}

According to lemma~\ref{lemma:hd-a-or-b} we can estimate the length
for the above formula by estimating the length of
        $$ B_k(0) $$
in the model $\PGQ$, i.e. there exists an at most exponential function~$f$
such that
\begin{equation}
\label{eq:length-1}
        |\HD(\Ax\limp(A_0\land C\limp B_k(0)))|\ge_f|\HDQ(B_k(0))|
\end{equation}
We will now write out the formulas to see where we have to zoom in to
find the core computation:
\begin{multline*}
        B_k(0) \ldef \qei vk\ldots\qei v0(\nat(v_k,\ldots,v_0)\land\\
        \land P(0,0,v_k)\land P(0,v_k,v_{k-1})\land\ldots\land P(0,v_1,v_0))
\end{multline*}
A part $P(a,b,c)$ is a formula describing $a+2^b=c$, which we obtained
from G\"odels representation theorems. More detailed we can say that
$P(a,b,c)$ looks like
 $\qe z(a+z=c\land G(b,z))$ with $G(x,y)$ describing $y=2^x$. Since every $P$
occurs in the above formula in the form $P(0,x,y)$, which is
 $\qe z(0+z=y\land G(x,z))$, which in turn is nothing else than $G(x,y)$, we
can write $B_k(0)$ also as
\begin{multline*}
        B_k(0) \ldef \qei vk\ldots\qei v0(\nat(v_k,\ldots,v_0)\land\\
        \land G(0,v_k)\land G(v_k,v_{k-1})\land\ldots\land G(v_1,v_0))
\end{multline*}
and with the abbreviations
        $$ G_0\ldef v_k=1 \qquad\qquad G_i\ldef G(v_i,v_{i-1})\quad i>0$$
we get
\begin{equation}
\label{eq:bk}
        B_k(0) \ldef \qei vk\ldots\qei v0(\nat(v_k,\ldots,v_0)
        \land G_0\land G_k\land\ldots\land G_1).
\end{equation}
Applying the lemmas~\ref{lemma:hd-exists}, \ref{lemma:hd-a-and-b}
and~\ref{lemma:hd-a-or-b} we have 
\begin{equation}
\label{eq:length-2}
        |\HDQ(B_k(0))|\ge_f|\HDQ(G_1)|
\end{equation}
where $v_0=2_k$ and $v_1=2_{k-1}$ and so on. This is obvious from the
fact that the~$v_i$ are the computed values of $2_l$,
i.e. $v_i=2_{k-i}$. 

We have now reduced the analysis from the original formula to the
analysis of a more simple formula, the formula~$G_1\ldef G(v_1,v_0)$
where $v_1$ and $v_0$ are number terms. The next step is to look into
 $G(x,z)$. Unfortunately here we come to the level where we have to
actually use G\"odels representing functions, actually find the
representing formula for $2^x$.

After a lot computation steps we arrive at the following formulas:
        $$ G(x,z) \ldef 2\beta(\qm kQ(x,k), x-1) = z $$
where
\begin{multline*}
        Q(x,k) \ldef \nat(k)\land\Seq k\land\lh k=x\land\goi k0=1\land\\
        \land\bqa ix(i\not=0\limp\goi ki=2\goi k{i-1}).
\end{multline*}
with $\Seq$, $\lh$, \ldots are the well known sequence functions.
We can write $G(x,z)$ as
        $$ G(x,z) \ldef\qe w(\nat(w)\land 2\beta(w,x-1)=
                        z\land w=\qm kQ(x,k)).$$
For $G_1$ we obtain
\begin{multline*}
  G_1\ldef G(v_1,v_0) \ldef\qquad (\exists w_1)
                (\nat(w_1)\land
                2\beta(w_1, v_1-1) =v_0\land \\
                w_1=\qm s(\Seq s\land\lh s=v_1\land\goi s0=1\land
  \bqa i{v_1}(i\not=0\limp\goi si=2\goi s{i-1})))
\end{multline*}
This means that $w_1=\gon {(2^0,2^1,\ldots,v_k)}$ the Gödel number of the
respective sequence. According to the lemma~\ref{lemma:hd-exists} we
can write $G_1$ as
        $$G_1\ldef 2\beta(w_1,v_1-1)=v_0\land w_1=\qm sQ(v_1,s)$$
with the above $w_1$.
So we can estimate the length of the Herbrand-disjunction again
from~\ref{lemma:hd-a-and-b} and~\ref{lemma:hd-exists}
\begin{equation}
\label{eq:length-3}
        |\HDQ(G_1)|\ge|\HDQ(w_1=\qm sQ(v_1,s))|
\end{equation}

We will now rewrite the formula $w_1=\qm sQ(v_1,s)$ with the aim to
eliminate all the bound quantifiers and the $\mu$-quantifier. 
\begin{eqnarray*}
&w_1=\qm sQ(v_1,s)\\
&Q(v_1,w_1) \land \bqa s{w_1}\lnot Q(v_1,s)\\
\hbox to 0pt{continuing with $Q(v_1,w_1)$\hss}\\
&\bqa i{v_1}(i\not=0\limp \goi{w_1}i=2\goi{w_1}{i-1})\\
&\lnot\bqe i{v_1}\lnot(i\not=0\limp\goi {w_1}i=2\goi {w_1}{i-1})\\
&\lnot\bqe i{v_1}(i\not=0\land\goi {w_1}i\not=2\goi {w_1}{i-1})\\
&\lnot(\bqm i{v_1}(i\not=0\land\goi {w_1}i\not=2\goi {w_1}{i-1})<{v_1})\\
&\lnot(\qm i(i={v_1}\lor(i\not=0\land\goi {w_1}i\not=2\goi {w_1}{i-1}))<{v_1})\\
&\lnot\qe q(q<{v_1}\land q=\qm i(i={v_1}\lor(i\not=0\land\goi {w_1}i\not=2\goi {w_1}{i-1}))).
\end{eqnarray*}
If we write
        $$L({v_1},{w_1},i)\ldef (i={v_1}\lor(i\not=0\land\goi {w_1}i\not=2\goi {w_1}{i-1})),$$
then $L(i,l,w)$ means that $w$ is the Gödel number of a sequence, which is
longer then $l$~entries, and that there is an index $i<v_l$ with
 $\goi wl\not=2\goi w{l-1}$. To say it in other words: The formula
 $L(i,l,w)$ is true if the sequence determined by~$w$ is not a
sequence of the form~$(2_0,2_1,2_2,\ldots)$ because somewhere in this
sequence there is a index where $x_i\not=2x_{i-1}$.

We will now further ``simplify'' --- or better analyze --- the last
formula from above: 
\begin{eqnarray*}
&\lnot\qe q(q<{v_1}\land q=\qm iL({v_1},{w_1},i))\\
&\lnot\qe q(q<{v_1}\land L({v_1},{w_1},q)\land \qa r(r<q\limp\lnot L({v_1},{w_1},r)))\\
&\qa q(q\not<{v_1}\lor \lnot L({v_1},{w_1},q)\lor\lnot\qa r(r<q\limp\lnot L({v_1},{w_1},r)))\\
&\qa q(q<{v_1}\limp \lnot L({v_1},{w_1},q)\lor\lnot\qa r(r<q\limp\lnot L({v_1},{w_1},r)))\\
&\qa q\left(\left(q<{v_1}\limp \lnot L({v_1},{w_1},q)\right)\lor
        \left(q<{v_1}\limp \lnot\qa r(r<q\limp\lnot L({v_1},{w_1},r))\right)%
        \right).
\end{eqnarray*}
The right disjunction part evaluates in the model $\PGQ$ to false and
therefore the length of the Herbrand-disjunction of the whole formula
can be estimated from below by the length of the Herbrand-disjunction
of the left part. But the left part tells us nothing else than there
is no ``wrong'' index in the sequence determined by~$w$, and therefore
this sequence is the sequence of~$2_i$:
\begin{eqnarray*}
&\qa q(q<{v_1}\limp(q\not={v_1}\land(q\not=0\limp\goi {w_1}q=2\goi {w_1}{q-1})))\\
&\qa q((q<{v_1}\limp q\not={v_1})\land(q<{v_1}\limp(q\not=0\limp\goi {w_1}q= 2\goi {w_1}{q-1}))).
\end{eqnarray*}
Again according to \ref{sec:herbrand:estimations} the length
of the Herbrand-disjunction of the last line can be estimated by the
length of the Herbrand-disjunction of
        $$\qa q(q<v_1\land q\not=0\limp\goi {w_1}q=2\goi {w_1}{q-1}),$$
so we get
\begin{eqnarray}
\label{eq:length-4}
        &|\HDQ(w_1=\qm sQ(v_1,s))|\nonumber\\ &\ge_f\\
        &|\HDQ(\qa q(q<v_1\land q\not=0\limp\goi {w_1}q=2\goi {w_1}{q-1}))|
        \nonumber
\end{eqnarray}
Finally we have obtained a formula where we can actually compute a
lower bound of the length of the \hd, namely the length is greater
than~$v_1$, which in turn is $2_{k-1}$:
\begin{equation}
\label{eq:length-5}
        |\HDQ(\qa q(q<v_1\land q\not=0\limp\goi {w_1}q=2\goi {w_1}{q-1}))|
        \ge_f
        v_1.
\end{equation}

Combining the formulas~\ref{eq:length-1}, \ref{eq:length-2},
\ref{eq:length-3}, \ref{eq:length-4} and \ref{eq:length-5}
we get
\begin{equation}
\label{eq:length-final}
        |\HD(\Ax\limp(A_0\land C\limp B_k(0)))|\ge_f v_1
\end{equation}
where $v_1=2_{k-1}$ and $f$~is an at most exponential function.

We have shown that the Herbrand-disjunction of the modified formula of
Orevkov is longer with respect to~$f$ than $2_{k-1}$. What is left to
show that there is a short proof in a reasonable calculus like \pelk. 


\subsubsection{The short proof}
\label{sec:orevkov:formula:short}

We now come to the proof that the formula~\ref{eq:orevkov} can be
proved in a few steps, more concrete, we will give a proof of this
formula with length linear in~$k$, the index of the formula.

In Orevkovs paper \citep{Orevkov79} there is a proof of
        $$\qai b0(A_0\land C\limp B_k(b_0)).$$
In this proof $P$ is a free predicate symbol, while in our context it is a
compound formula. The second difference is that there are no
``restriction-formulas'' $\nat(x)$ in his proofs. But these two points do not
generate a problem, because
\begin{itemize}
\item Orevkovs proofs can be used if we work in a calculus where compound
initial sequents are allowed. This is no problem since the transformation from
compound to atomic initial sequents is linear (see~\cite{BFL94LICS} and
further improvements).
\item A subformula $A$ of Orevkovs proof is changed to $\nat(\ldots)\limp A$
with the free variables in the $\nat$ part. 
\end{itemize}
These two changes together with a weakening at the end we get a proof
of equation~\ref{eq:orevkov} from the original proof. This proof has a length
which is linear in~$k$.

\endinput

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "paper"
%%% End: 
